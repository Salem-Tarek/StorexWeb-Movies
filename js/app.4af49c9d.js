(function(e){function t(t){for(var i,r,n=t[0],l=t[1],c=t[2],m=0,u=[];m<n.length;m++)r=n[m],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={app:0},o=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/StorexWeb-Movies/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1f72":function(e,t,a){"use strict";a("d964")},"2c44":function(e,t,a){},"39fb":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),s=a("7496"),o=a("f6c4"),r=function(){var e=this,t=e._self._c;return t(s["a"],[t("Navbar"),t(o["a"],[t("router-view")],1)],1)},n=[],l=a("40dc"),c=a("8336"),d=a("a523"),m=a("132d"),u=a("2a7f"),g=function(){var e=this,t=e._self._c;return t(l["a"],{attrs:{app:""}},[t(d["a"],{staticClass:"d-flex justify-space-between align-center"},[t(u["a"],{staticClass:"display-1 text-uppercase"},[e._v(e._s(e.pageTitle))]),e.isAuthenticated?t(c["a"],{attrs:{small:""},on:{click:function(t){return e.logOutFunc()}}},[t(m["a"],{attrs:{left:"",small:""}},[e._v("mdi-logout")]),e._v(" LogOut ")],1):e._e()],1)],1)},v=[],p=(a("14d9"),a("2f62")),h={name:"Navbar",computed:{...Object(p["c"])(["isAuthenticated"]),pageTitle(){return this.$route.path.startsWith("/movie-page")?"Movie Page":"/"===this.$route.path?"Movies":this.$route.path.slice(1)}},methods:{...Object(p["b"])(["logOut"]),async logOutFunc(){await this.logOut(),this.$router.push("/login")}}},f=h,b=a("2877"),y=Object(b["a"])(f,g,v,!1,null,null,null),w=y.exports,C={name:"App",components:{Navbar:w}},_=C,x=Object(b["a"])(_,r,n,!1,null,null,null),M=x.exports,k=a("9483");Object(k["a"])("/StorexWeb-Movies/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var D=a("8c4f"),F=(a("3c65"),a("bc3a")),j=a.n(F),O=a("0e44");i["a"].use(p["a"]);var I=new p["a"].Store({state:{user:localStorage.getItem("moviesRegisterToken")||null,movies:null,categories:[]},getters:{getUser:e=>e.user,getMovies:e=>e.movies,getCategories:e=>e.categories,isAuthenticated:e=>!!e.user},mutations:{setUser(e,t){e.user=t},setMovies(e,t){e.movies=t},setCategories(e,t){e.categories=t},addMovie(e,t){e.movies.unshift(t)},editMovie(e,t){let a=e.movies.findIndex(e=>e.id==t.id);e.movies.splice(a,1,t)},deleteMovie(e,t){e.movies=e.movies.filter(e=>e.id!==t.id)},logOut(e){e.user=null,e.movies=null}},actions:{async Register({dispatch:e},t){const a=await j.a.post("register",t),i=a.data.authorisation.token;localStorage.setItem("moviesRegisterToken",i),200===a.status?await e("LogIn",t):alert("This Email already Exist")},async LogIn(e,t){const a=await j.a.post("login",t);200===a.status?await e.commit("setUser",localStorage.getItem("moviesRegisterToken")):alert("Email or Password incorrect"),localStorage.setItem("moviesRegisterToken",a.data.authorisation.token),e.dispatch("Movies",localStorage.getItem("moviesRegisterToken")),e.dispatch("Categories",localStorage.getItem("moviesRegisterToken"))},async Movies({commit:e},t){const a=await j.a.get("movies",{headers:{Authorization:"Bearer "+t}});e("setMovies",a.data.message)},async Categories({commit:e},t){const a=await j.a.get("category",{headers:{Authorization:"Bearer "+t}});e("setCategories",a.data.message)},async AddMovie({commit:e},t){let a=new FormData;a.append("image",t.image),a.append("name",t.name),a.append("description",t.description),a.append("category_id",t.category_id);const i=await j()({url:"movies",method:"post",data:a,headers:{Authorization:"Bearer "+localStorage.getItem("moviesRegisterToken")}});e("addMovie",i.data.message)},async EditMovie({commit:e},t){let a=new FormData;a.append("image",t.image),a.append("name",t.name),a.append("description",t.description),a.append("category_id",t.category_id),a.append("_method","put");const i=await j()({url:"movies/"+t.id,method:"post",data:a,headers:{Authorization:"Bearer "+localStorage.getItem("moviesRegisterToken")}});e("editMovie",i.data.message)},async DeleteMovie({commit:e},t){let a=new FormData;a.append("image",t.image),a.append("name",t.name),a.append("description",t.description),a.append("category_id",t.category_id),a.append("_method","delete"),await j()({url:"movies/"+t.id,method:"post",data:a,headers:{Authorization:"Bearer "+localStorage.getItem("moviesRegisterToken")}}),e("deleteMovie",t)},logOut({commit:e}){localStorage.removeItem("moviesRegisterToken"),e("logOut")}},plugins:[Object(O["a"])()]}),A=a("62ad"),S=a("4bd4"),E=a("0fd9"),R=a("8654"),N=function(){var e=this,t=e._self._c;return t(d["a"],[t(S["a"],{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(E["a"],[t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.rules.email,label:"Email",required:""},model:{value:e.logInForm.email,callback:function(t){e.$set(e.logInForm,"email",t)},expression:"logInForm.email"}})],1),t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.rules.password,type:"password",label:"Password",required:""},model:{value:e.logInForm.password,callback:function(t){e.$set(e.logInForm,"password",t)},expression:"logInForm.password"}})],1),t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(c["a"],{attrs:{dark:"",type:"submit"}},[e._v("submit")])],1),t("p",{staticClass:"subtitle-1 text-center mx-auto mt-3 font-weight-bold"},[e._v(" If you don't have account, "),t("router-link",{attrs:{to:"/register"}},[e._v("Create Account")]),e._v(" Now. ")],1)],1)],1)],1)},P=[],$={name:"Home",data(){return{logInForm:{email:"",password:""},valid:!1,rules:{email:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],password:[e=>!!e||"Password is Required",e=>e.length>=8||"Password Must be At least 8 Numbers"]}}},methods:{...Object(p["b"])(["LogIn"]),async submitForm(){if(this.$refs.form.validate())try{await this.LogIn(this.logInForm),this.$router.push("/")}catch(e){alert("Email or Password incorrect")}else alert("Please, Fill all Fields according to the rules")}}},T=$,q=(a("5ff0"),Object(b["a"])(T,N,P,!1,null,null,null)),B=q.exports,L=function(){var e=this,t=e._self._c;return t(d["a"],[t(S["a"],{ref:"regForm",on:{submit:function(t){return t.preventDefault(),e.submitForm()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(E["a"],[t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.rules.name,label:"Name",required:""},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.rules.email,label:"Email",required:""},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.rules.password,type:"password",label:"Password",required:""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),t(A["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t(c["a"],{attrs:{dark:"",type:"submit"}},[e._v("submit")])],1),t("p",{staticClass:"subtitle-1 text-center mx-auto mt-3 font-weight-bold"},[e._v(" If you have account, "),t("router-link",{attrs:{to:"/logIn"}},[e._v("LogIn")]),e._v(" Now. ")],1)],1)],1)],1)},z=[],U={name:"Home",data(){return{registerForm:{email:"",password:"",name:""},valid:!1,rules:{email:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],name:[e=>!!e||"Name is required"],password:[e=>!!e||"Password is Required",e=>e.length>=8||"Password Must be At least 8 Numbers"]}}},methods:{...Object(p["b"])(["Register"]),async submitForm(){if(this.$refs.regForm.validate())try{await this.Register(this.registerForm),this.$router.push("/")}catch(e){alert("Not Valid Form")}else alert("Please, Fill all Fields according to the rules")}}},W=U,H=(a("1f72"),Object(b["a"])(W,L,z,!1,null,null,null)),J=H.exports,V=a("b0af"),G=a("99d9"),K=a("23a7"),Q=a("adda"),X=a("a797"),Y=a("b974"),Z=a("a844"),ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"movies"},[t(d["a"],[t("div",{staticClass:"add-movie"},[t("div",{staticClass:"d-flex align-center justify-space-between"},[t(Y["a"],{attrs:{items:e.searchCategories,rules:e.Rules.category,"cache-items":"",outlined:"",label:"Select Category",dense:"","hide-details":"","item-text":"name","item-value":"id"},on:{change:function(t){return e.filterCategory()}},model:{value:e.filteredCategory,callback:function(t){e.filteredCategory=t},expression:"filteredCategory"}}),t(c["a"],{staticClass:"my-5 ml-4",attrs:{depressed:"",dark:""},on:{click:function(t){return e.createNewMovie()}}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Add Movie ")],1)],1),t(X["a"],{attrs:{value:e.show,opacity:"0.9"}},[t(S["a"],{ref:"addForm",staticClass:"mx-auto py-5",attrs:{enctype:"multipart/form-data","lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.Add_Edit_Movie(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(E["a"],[t(A["a"],{staticClass:"py-0",attrs:{cols:"12"}},[t(R["a"],{attrs:{rules:e.Rules.name,placeholder:"Movie Name",label:"Movie Name",required:"",outlined:"",dark:"",dense:""},model:{value:e.movieData.name,callback:function(t){e.$set(e.movieData,"name",t)},expression:"movieData.name"}})],1),t(A["a"],{staticClass:"py-0",attrs:{cols:"12"}},[t(Z["a"],{attrs:{rules:e.Rules.description,placeholder:"Movie Description",label:"Movie Description",required:"",outlined:"",dark:"",dense:"",height:"100px","no-resize":""},model:{value:e.movieData.description,callback:function(t){e.$set(e.movieData,"description",t)},expression:"movieData.description"}})],1),t(A["a"],{staticClass:"py-0",attrs:{cols:"12"}},[t(Y["a"],{attrs:{items:e.categories,rules:e.Rules.category,"cache-items":"",outlined:"",label:"Select Category",dark:"",dense:"","item-text":"name","item-value":"id"},model:{value:e.movieData.category_id,callback:function(t){e.$set(e.movieData,"category_id",t)},expression:"movieData.category_id"}})],1),t(A["a"],{staticClass:"py-0",attrs:{cols:"12"}},[t(K["a"],{attrs:{accept:".jpg, .jpeg, .png",label:"Upload Movie Image",outlined:"",dark:"",dense:"","append-icon":"mdi-image","prepend-icon":""},model:{value:e.movieData.image,callback:function(t){e.$set(e.movieData,"image",t)},expression:"movieData.image"}})],1)],1),t("div",{staticClass:"mt-4"},[t(c["a"],{staticClass:"mr-3",attrs:{light:"",disabled:!e.valid,type:"submit"}},[e._v(" "+e._s(e.newMovie?"Add Movie":"Edit Movie"))]),t(c["a"],{attrs:{light:""},on:{click:function(t){e.show=!1}}},[e._v("Cancel")])],1)],1)],1)],1),t(E["a"],[e._l(e.movies,(function(i){return t(A["a"],{key:i.id,staticClass:"d-flex align-center justify-center",attrs:{cols:"12",md:"3",sm:"6"}},[t("router-link",{staticClass:"text-decoration-none",attrs:{to:"/movie-page/"+i.id}},[t(V["a"],{staticClass:"pa-5 pb-0",attrs:{color:"#EEE",height:"515px",width:"275px"}},[t(Q["a"],{attrs:{width:"100%",height:"300px",src:a("fb2e")}}),t(G["c"],{staticClass:"pa-0 mt-3"},[e._v(e._s(i.name))]),t("div",{staticClass:"d-flex align-center"},[t("span",[e._v("Description: ")]),t(G["b"],{staticClass:"pa-2"},[e._v(e._s(i.description))])],1),t("div",{staticClass:"d-flex align-center"},[t("span",[e._v("Category: ")]),t(G["b"],{staticClass:"pa-2"},[e._v(e._s(e.getCategoryById(i.category_id)))])],1),t(G["a"],{staticClass:"d-flex align-center justify-space-between"},[t(m["a"],{on:{click:function(t){return t.preventDefault(),e.editMovie(i)}}},[e._v("mdi-pencil")]),t(m["a"],{on:{click:function(t){return t.preventDefault(),e.deleteMovie(i)}}},[e._v("mdi-delete")])],1)],1)],1)],1)})),0===e.movies.length?t(A["a"],{staticClass:"text-center mt-10",attrs:{cols:"12"}},[t("p",{staticClass:"display-1"},[e._v(" No Movies found for this Category ")])]):e._e()],2)],1)],1)},te=[],ae={name:"Movies",data(){return{show:!1,valid:!1,filteredCategory:"",newMovie:!0,movies:[],movieData:{id:"",name:"",description:"",category_id:null,image:[]},image:[],Rules:{name:[e=>!!e||"Movie name is Required"],description:[e=>!!e||"Description is Required"],category:[e=>"Select Category"!==e||"Select Category"]},searchCategories:this.getCategories,categories:this.getCategories}},computed:{...Object(p["c"])(["getMovies","getCategories"])},methods:{...Object(p["b"])(["AddMovie","EditMovie","DeleteMovie"]),editMovie(e){this.newMovie=!1,this.show=!0,this.movieData.id=e.id,this.movieData.name=e.name,this.movieData.description=e.description,this.movieData.category_id=e.category_id},deleteMovie(e){this.DeleteMovie(e)},Add_Edit_Movie(e){if(this.$refs.addForm.validate()){if(console.log("Validated"),"add movie"===e.submitter.innerText.toLowerCase().trim())this.AddMovie(this.movieData);else if("edit movie"===e.submitter.innerText.toLowerCase().trim()){const e={};e.id=this.movieData.id,e.image=this.movieData.image,e.name=this.movieData.name,e.description=this.movieData.description,e.category_id=this.movieData.category_id,this.EditMovie(e)}this.emptyFields(),this.show=!1}else alert("Please, Fill all Fields according to the rules")},getCategoryById(e){let t=this.categories.filter(t=>t.id==e)[0];return t?t.name:"New Category"},filterCategory(){""===this.filteredCategory?this.movies=this.getMovies:this.movies=this.getMovies.filter(e=>e.category_id==this.filteredCategory)},createNewMovie(){this.show=!0,this.newMovie=!0},emptyFields(){this.movieData.id="",this.movieData.image=[],this.movieData.name="",this.movieData.description="",this.movieData.category_id=""}},watch:{getMovies(e){this.movies=e}},created(){this.movies=this.getMovies,this.searchCategories=this.getCategories,this.searchCategories.unshift({name:"All Movies",id:""}),this.searchCategories=[...new Set(this.searchCategories)],this.categories=this.getCategories.filter(e=>"All Movies"!==e.name)}},ie=ae,se=(a("d174"),Object(b["a"])(ie,ee,te,!1,null,null,null)),oe=se.exports,re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"movie-page"},[t(d["a"],[t(E["a"],[t(A["a"],{attrs:{cols:"12",md:"6"}},[t(Q["a"],{attrs:{"max-height":"80vh",src:a("fb2e")}})],1),t(A["a"],{attrs:{cols:"12",md:"6"}},[t(V["a"],{staticClass:"pa-5",attrs:{color:"#EEE"}},[t("div",{staticClass:"content"},[t(G["c"],{staticClass:"pa-0 mt-3"},[e._v(e._s(e.movie.name))]),t("div",{staticClass:"d-flex align-center"},[t("span",[e._v("Description: ")]),t(G["b"],{staticClass:"pa-2"},[e._v(e._s(e.movie.description))])],1),t("div",{staticClass:"d-flex align-center"},[t("span",[e._v("Category: ")]),t(G["b"],{staticClass:"pa-2"},[e._v(e._s(e.getCategoryById(e.movie.category_id)))])],1)],1)])],1)],1)],1)],1)},ne=[],le={name:"MoviePage",data(){return{movie:{},categories:this.getCategories}},computed:{...Object(p["c"])(["getCategories"])},methods:{getCategoryById(e){let t=this.categories.filter(t=>t.id==e)[0];return t?t.name:"New Category"}},async mounted(){const e=await j()({url:"movies/"+this.$route.params.id,method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("moviesRegisterToken")}});this.movie=e.data.message},created(){this.categories=this.getCategories}},ce=le,de=Object(b["a"])(ce,re,ne,!1,null,null,null),me=de.exports;i["a"].use(D["a"]);const ue=[{path:"/",name:oe,component:oe,meta:{requiresAuth:!0}},{path:"/movie-page/:id",name:me,component:me,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:B,meta:{guest:!0}},{path:"/register",name:"Register",component:J,meta:{guest:!0}}],ge=new D["a"]({mode:"history",base:"/StorexWeb-Movies/",routes:ue});ge.beforeEach((e,t,a)=>{if(e.matched.some(e=>e.meta.requiresAuth)){if(I.getters.isAuthenticated)return void a();a("/login")}else a()}),ge.beforeEach((e,t,a)=>{if(e.matched.some(e=>e.meta.guest)){if(I.getters.isAuthenticated)return void a("/");a()}else a()});var ve=ge,pe=a("f309");i["a"].use(pe["a"]);var he=new pe["a"]({});j.a.defaults.baseURL="https://test-api.storexweb.com/api/",i["a"].config.productionTip=!1,new i["a"]({router:ve,store:I,vuetify:he,render:e=>e(M)}).$mount("#app")},"5ff0":function(e,t,a){"use strict";a("39fb")},d174:function(e,t,a){"use strict";a("2c44")},d964:function(e,t,a){},fb2e:function(e,t,a){e.exports=a.p+"img/poster.36f75f7b.jpg"}});
//# sourceMappingURL=app.4af49c9d.js.map